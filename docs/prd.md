# Product Requirements Document (PRD): PromptPal

**Version:** 1.0
**Date:** January 1, 2026
**Status:** In Development
**Target Launch:** January 31, 2026

## 1. Executive Summary
PromptPal is a mobile game built with React Native and Expo that teaches users prompt engineering through a "Say What You See" mechanic. Users analyze an AI-generated image and attempt to write a text prompt that recreates it. The application leverages Google's Gemini models for image generation, vision analysis, and on-device assistance.

## 2. Objectives
*   **Educational:** Teach users the hierarchy of a good prompt (Subject, Medium, Style, Lighting, Context).
*   **Engagement:** Create an addictive "close-match" gameplay loop.
*   **Technical:** Demonstrate the capabilities of Gemini Pro and Gemini Nano in a mobile environment.

## 3. User Personas
*   **The Learner:** Wants to understand how to use Midjourney or DALL-E but feels overwhelmed.
*   **The Gamer:** Enjoys puzzle solving and pattern recognition challenges.

## 4. Functional Requirements

### 4.1. Core Gameplay Loop
1.  **Image Display:** The user is presented with a pre-generated "Target Image" (created via Gemini).
2.  **Analysis:** The user analyzes visual elements (style, colors, subject).
3.  **Input:** The user types a descriptive prompt into a text field.
4.  **Generation:** The system generates a "Result Image" based on the user's input using the Gemini API.
5.  **Comparison & Scoring:**
    *   The system compares the Result Image to the Target Image.
    *   **Score Calculation:** A semantic similarity score (0-100%) is generated.
    *   **Success Threshold:** >75% similarity advances the level.

### 4.2. Hints & Assistance (Gemini Nano)
*   **Contextual Tips:** While typing, the local Nano model analyzes the text stream.
*   **Missing Keywords:** If the user ignores a category (e.g., they described the subject but not the art style), a toast notification appears: *"Try adding a medium, like 'oil painting' or '3D render'."*

### 4.3. Progression System
*   **Levels:** 3 distinct difficulty tiers.
    *   *Beginner:* Single subject, distinct style.
    *   *Intermediate:* Complex lighting, multiple subjects.
    *   *Advanced:* Abstract concepts, specific camera angles, mixed media.
*   **Lives:** Users get 3 attempts per image to achieve the passing threshold.

## 5. Technical Architecture

### 5.1. Tech Stack
*   **Frontend:** React Native (Expo SDK 50+).
*   **Language:** TypeScript.
*   **Styling:** NativeWind (Tailwind CSS).
*   **Navigation:** Expo Router v3.
*   **Local Storage:** MMKV or Expo SecureStore (for level progress).

### 5.2. AI Integration
*   **Target Image Generation (Pre-computation):**
    *   *Model:* Gemini Pro / Imagen 2 via Vertex AI.
    *   *Process:* Generate 50+ images for the level library before launch to save runtime costs.
*   **User Image Generation (Runtime):**
    *   *Model:* Gemini Pro / Imagen 2.
    *   *Latency Target:* < 5 seconds.
*   **Scoring Logic (Backend/Cloud Function):**
    *   *Input:* Target Image + User Result Image.
    *   *Model:* Gemini Pro Vision.
    *   *Prompt:* "Compare these two images. Rate their visual similarity on a scale of 0 to 100 based on composition, style, and subject. Return only the integer."
*   **On-Device Assistance:**
    *   *Model:* Gemini Nano (via Google AI Edge SDK for Android, specialized handling for iOS).

## 6. UX/UI Requirements

### 6.1. Screens
1.  **Splash Screen:** Logo and "Powered by Gemini."
2.  **Onboarding:** 3-slide tutorial explaining "Subject + Style + Context."
3.  **Level Select Map:** A vertical scrolling list of unlocked/locked levels.
4.  **Game View:**
    *   Top 50%: Target Image (Zoomable).
    *   Bottom 50%: Input field, "Generate" button, Remaining Attempts counter.
5.  **Result Modal:** Side-by-side view of Target vs. Result. Score gauge. "Next Level" or "Retry" buttons.

### 6.2. Design System
*   **Theme:** Dark mode by default (enhances image visibility).
*   **Typography:** Sans-serif, legible at small sizes.
*   **Feedback:** Haptic feedback on success/failure.

## 7. Data Requirements
*   **Level Data Structure (JSON):**
    ```json
    {
      "id": "level_01",
      "difficulty": "easy",
      "target_image_url": "assets/images/level_01.png",
      "hidden_prompt_attributes": ["cat", "cyberpunk", "neon"],
      "passing_score": 70
    }
    ```

## 8. Development Constraints & Risks
*   **API Costs:** Generating an image for every user attempt is expensive.
    *   *Mitigation:* Limit attempts to 3. Cache generated images if multiple users happen to type the exact same prompt (unlikely but possible).
*   **Latency:** Image generation takes time.
    *   *Mitigation:* Use loading skeletons and entertaining loading text generated by Nano.
*   **Gemini Nano Availability:** Nano is currently supported on specific Android devices (Pixel 8 Pro, S24).
    *   *Fallback:* If Nano is unavailable, use a basic regex-based rule engine for tips or a lightweight cloud call to Gemini Flash.

## 9. Deliverables Roadmap
*   **Jan 7:** Architecture set, API connections verified.
*   **Jan 14:** Playable "Level 1" with scoring loop functioning.
*   **Jan 21:** Nano integration for tips; UI polish.
*   **Jan 31:** Deployment to Expo Go / Internal Distribution.